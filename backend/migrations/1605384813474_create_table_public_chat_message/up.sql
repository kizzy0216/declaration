CREATE EXTENSION IF NOT EXISTS pgcrypto;
CREATE TABLE "public"."chat_message"("uuid" uuid NOT NULL DEFAULT gen_random_uuid(), "sender_uuid" uuid NOT NULL, "conversation_uuid" uuid, "loop_uuid" uuid, "media_uuid" uuid, "text" text, "reaction" text, "is_archived" boolean NOT NULL DEFAULT false, "updated_at" timestamptz NOT NULL DEFAULT now(), "created_at" timestamptz NOT NULL DEFAULT now(), PRIMARY KEY ("uuid") , FOREIGN KEY ("loop_uuid") REFERENCES "public"."loop"("uuid") ON UPDATE cascade ON DELETE cascade, FOREIGN KEY ("sender_uuid") REFERENCES "public"."user"("uuid") ON UPDATE cascade ON DELETE cascade, FOREIGN KEY ("conversation_uuid") REFERENCES "public"."conversation"("uuid") ON UPDATE cascade ON DELETE cascade, FOREIGN KEY ("media_uuid") REFERENCES "public"."media"("uuid") ON UPDATE cascade ON DELETE cascade);
