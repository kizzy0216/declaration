- table:
    schema: public
    name: network
  array_relationships:
  - name: network_membership_invitations
    using:
      foreign_key_constraint_on:
        column: network_uuid
        table:
          schema: public
          name: network_membership_invitation
  - name: network_membership_requests
    using:
      foreign_key_constraint_on:
        column: network_uuid
        table:
          schema: public
          name: network_membership_request
  - name: network_user_profiles
    using:
      foreign_key_constraint_on:
        column: network_uuid
        table:
          schema: public
          name: network_user_profile
  - name: network_user_relationships
    using:
      foreign_key_constraint_on:
        column: network_uuid
        table:
          schema: public
          name: network_user_relationship
  - name: network_users
    using:
      foreign_key_constraint_on:
        column: network_uuid
        table:
          schema: public
          name: network_user
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - avatar
      - name
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - avatar
      - created_at
      - id
      - name
      - updated_at
      - uuid
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - avatar
      - created_at
      - id
      - name
      - updated_at
      - uuid
      filter: {}
      allow_aggregations: true
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - avatar
      - name
      filter: {}
      check: null
  - role: user
    permission:
      columns:
      - avatar
      - name
      filter:
        _and:
        - network_users:
            user_uuid:
              _eq: X-Hasura-User-Id
        - network_users:
            user_role:
              text:
                _eq: NETWORK_ADMIN
      check: null
- table:
    schema: public
    name: network_access_request
  insert_permissions:
  - role: anonymous
    permission:
      check: {}
      columns:
      - body
      - community_name
      - requester_email
      - requester_name
      - user_count_range
      backend_only: false
  - role: super_admin
    permission:
      check: {}
      columns:
      - user_count_range
      - id
      - body
      - community_name
      - requester_email
      - requester_name
      - created_at
      - updated_at
      - uuid
      backend_only: false
  - role: user
    permission:
      check: {}
      columns:
      - body
      - community_name
      - requester_email
      - requester_name
      - user_count_range
      backend_only: false
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - id
      - uuid
      filter: {}
  - role: super_admin
    permission:
      columns:
      - user_count_range
      - id
      - body
      - community_name
      - requester_email
      - requester_name
      - created_at
      - updated_at
      - uuid
      filter: {}
  - role: user
    permission:
      columns:
      - id
      - uuid
      filter: {}
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - user_count_range
      - id
      - body
      - community_name
      - requester_email
      - requester_name
      - created_at
      - updated_at
      - uuid
      filter: {}
      check: null
  delete_permissions:
  - role: super_admin
    permission:
      filter: {}
- table:
    schema: public
    name: network_membership_invitation
  object_relationships:
  - name: network
    using:
      foreign_key_constraint_on: network_uuid
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - network_uuid
      - redirect
      - user_email
      - user_name
      backend_only: false
  - role: user
    permission:
      check:
        _and:
        - network:
            network_users:
              user_uuid:
                _eq: X-Hasura-User-Id
        - network:
            network_users:
              user_role:
                text:
                  _eq: NETWORK_ADMIN
      columns:
      - network_uuid
      - redirect
      - user_email
      - user_name
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - code
      - created_at
      - id
      - network_uuid
      - redirect
      - updated_at
      - user_email
      - user_name
      - uuid
      filter: {}
  - role: user
    permission:
      columns:
      - created_at
      - id
      - network_uuid
      - updated_at
      - user_email
      - user_name
      - uuid
      filter:
        network:
          network_users:
            _and:
            - user_uuid:
                _eq: X-Hasura-User-Id
            - user_role:
                text:
                  _eq: NETWORK_ADMIN
  delete_permissions:
  - role: super_admin
    permission:
      filter: {}
  - role: user
    permission:
      filter:
        _and:
        - network:
            network_users:
              user_uuid:
                _eq: X-Hasura-User-Id
        - network:
            network_users:
              user_role:
                text:
                  _eq: NETWORK_ADMIN
  event_triggers:
  - name: network-membership-invitation
    definition:
      enable_manual: true
      insert:
        columns: '*'
      delete:
        columns: '*'
      update:
        columns:
        - id
        - code
        - redirect
        - user_email
        - user_name
        - created_at
        - updated_at
        - network_uuid
        - uuid
    retry_conf:
      num_retries: 3
      interval_sec: 10
      timeout_sec: 60
    webhook_from_env: NETWORK_MEMBERSHIP_INVITATION_WEBHOOK_URL
- table:
    schema: public
    name: network_membership_request
  object_relationships:
  - name: network
    using:
      foreign_key_constraint_on: network_uuid
  - name: user
    using:
      foreign_key_constraint_on: user_uuid
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - created_at
      - network_uuid
      - updated_at
      - user_uuid
      backend_only: false
  - role: user
    permission:
      check:
        user_uuid:
          _eq: X-Hasura-User-Id
      columns:
      - body
      - network_uuid
      - user_uuid
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - body
      - created_at
      - id
      - network_uuid
      - updated_at
      - user_uuid
      - uuid
      filter: {}
  - role: user
    permission:
      columns:
      - body
      - created_at
      - id
      - network_uuid
      - updated_at
      - user_uuid
      - uuid
      filter:
        _or:
        - user_uuid:
            _eq: X-Hasura-User-Id
        - network:
            network_users:
              _and:
              - user_uuid:
                  _eq: X-Hasura-User-Id
              - user_role:
                  text:
                    _eq: NETWORK_ADMIN
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - network_uuid
      - user_uuid
      filter: {}
      check: null
  delete_permissions:
  - role: super_admin
    permission:
      filter: {}
  - role: user
    permission:
      filter:
        network:
          network_users:
            _and:
            - user_uuid:
                _eq: X-Hasura-User-Id
            - user_role:
                text:
                  _eq: NETWORK_ADMIN
- table:
    schema: public
    name: network_user
  object_relationships:
  - name: network
    using:
      foreign_key_constraint_on: network_uuid
  - name: user
    using:
      foreign_key_constraint_on: user_uuid
  - name: user_role
    using:
      foreign_key_constraint_on: role
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - created_at
      - is_blocked
      - network_uuid
      - role
      - updated_at
      - user_uuid
      backend_only: false
  - role: user
    permission:
      check:
        _and:
        - network:
            network_users:
              user_uuid:
                _eq: X-Hasura-User-Id
        - network:
            network_users:
              user_role:
                text:
                  _eq: NETWORK_ADMIN
      columns:
      - is_blocked
      - network_uuid
      - role
      - user_uuid
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - created_at
      - is_blocked
      - network_uuid
      - role
      - updated_at
      - user_uuid
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - created_at
      - is_blocked
      - network_uuid
      - role
      - updated_at
      - user_uuid
      filter:
        network:
          network_users:
            user_uuid:
              _eq: X-Hasura-User-Id
      allow_aggregations: true
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - created_at
      - is_blocked
      - network_uuid
      - role
      - updated_at
      - user_uuid
      filter: {}
      check: null
  - role: user
    permission:
      columns:
      - is_blocked
      - role
      filter:
        _and:
        - network:
            network_users:
              user_uuid:
                _eq: X-Hasura-User-Id
        - network:
            network_users:
              user_role:
                text:
                  _eq: NETWORK_ADMIN
      check: null
  delete_permissions:
  - role: super_admin
    permission:
      filter: {}
- table:
    schema: public
    name: network_user_profile
  object_relationships:
  - name: network
    using:
      foreign_key_constraint_on: network_uuid
  - name: user
    using:
      foreign_key_constraint_on: user_uuid
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - network_uuid
      - problem_bio
      - solution_bio
      - user_uuid
      backend_only: false
  - role: user
    permission:
      check:
        user_uuid:
          _eq: X-Hasura-User-Id
      columns:
      - network_uuid
      - problem_bio
      - solution_bio
      - user_uuid
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - id
      - problem_bio
      - solution_bio
      - created_at
      - updated_at
      - network_uuid
      - user_uuid
      - uuid
      filter: {}
  - role: user
    permission:
      columns:
      - uuid
      - id
      - network_uuid
      - user_uuid
      - problem_bio
      - solution_bio
      - created_at
      - updated_at
      filter:
        network:
          network_users:
            user_uuid:
              _eq: X-Hasura-User-Id
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - problem_bio
      - solution_bio
      filter: {}
      check: {}
  - role: user
    permission:
      columns:
      - problem_bio
      - solution_bio
      filter:
        user_uuid:
          _eq: X-Hasura-User-Id
      check: null
- table:
    schema: public
    name: network_user_relationship
  object_relationships:
  - name: from_user
    using:
      foreign_key_constraint_on: from_user_uuid
  - name: network
    using:
      foreign_key_constraint_on: network_uuid
  - name: network_user_relationship_type
    using:
      foreign_key_constraint_on: type
  - name: to_user
    using:
      foreign_key_constraint_on: to_user_uuid
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - from_user_uuid
      - network_uuid
      - to_user_uuid
      - type
      backend_only: false
  - role: user
    permission:
      check:
        _and:
        - network:
            network_users:
              user_uuid:
                _eq: X-Hasura-User-Id
        - _and:
          - from_user_uuid:
              _eq: X-Hasura-User-Id
          - type:
              _in:
              - PENDING
              - BLOCKED
              - MUTED
      columns:
      - from_user_uuid
      - network_uuid
      - to_user_uuid
      - type
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - id
      - type
      - created_at
      - updated_at
      - from_user_uuid
      - network_uuid
      - to_user_uuid
      - uuid
      filter: {}
  - role: user
    permission:
      columns:
      - uuid
      - id
      - network_uuid
      - from_user_uuid
      - to_user_uuid
      - type
      - created_at
      - updated_at
      filter:
        _and:
        - network:
            network_users:
              user_uuid:
                _eq: X-Hasura-User-Id
        - _or:
          - from_user_uuid:
              _eq: X-Hasura-User-Id
          - to_user_uuid:
              _eq: X-Hasura-User-Id
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - type
      filter: {}
      check: null
  - role: user
    permission:
      columns:
      - type
      filter:
        _and:
        - network:
            network_users:
              user_uuid:
                _eq: X-Hasura-User-Id
        - _or:
          - _and:
            - from_user_uuid:
                _eq: X-Hasura-User-Id
            - type:
                _in:
                - PENDING
                - BLOCKED
                - MUTED
          - _and:
            - to_user_uuid:
                _eq: X-Hasura-User-Id
            - type:
                _in:
                - CONNECTED
                - BLOCKED
                - MUTED
      check: null
  delete_permissions:
  - role: super_admin
    permission:
      filter: {}
  - role: user
    permission:
      filter:
        _and:
        - network:
            network_users:
              user_uuid:
                _eq: X-Hasura-User-Id
        - _or:
          - from_user_uuid:
              _eq: X-Hasura-User-Id
          - _and:
            - to_user_uuid:
                _eq: X-Hasura-User-Id
            - type:
                _in:
                - CONNECTED
                - PENDING
- table:
    schema: public
    name: network_user_relationship_type
  is_enum: true
  array_relationships:
  - name: network_user_relationships
    using:
      foreign_key_constraint_on:
        column: type
        table:
          schema: public
          name: network_user_relationship
- table:
    schema: public
    name: super_admin
  object_relationships:
  - name: user
    using:
      foreign_key_constraint_on: user_uuid
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - user_uuid
      filter: {}
  - role: user
    permission:
      columns:
      - user_uuid
      filter: {}
- table:
    schema: public
    name: user
  object_relationships:
  - name: super_admin
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: super_admin
        column_mapping:
          uuid: user_uuid
  - name: user_profile
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_profile
        column_mapping:
          uuid: user_uuid
  array_relationships:
  - name: from_network_user_relationships
    using:
      foreign_key_constraint_on:
        column: from_user_uuid
        table:
          schema: public
          name: network_user_relationship
  - name: network_membership_requests
    using:
      foreign_key_constraint_on:
        column: user_uuid
        table:
          schema: public
          name: network_membership_request
  - name: network_user_profiles
    using:
      foreign_key_constraint_on:
        column: user_uuid
        table:
          schema: public
          name: network_user_profile
  - name: network_users
    using:
      foreign_key_constraint_on:
        column: user_uuid
        table:
          schema: public
          name: network_user
  - name: to_network_user_relationships
    using:
      foreign_key_constraint_on:
        column: to_user_uuid
        table:
          schema: public
          name: network_user_relationship
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - is_verified
      - id
      - email
      - name
      - created_at
      - updated_at
      - uuid
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - is_verified
      - id
      - email
      - name
      - created_at
      - updated_at
      - uuid
      filter: {}
  - role: user
    permission:
      columns:
      - created_at
      - email
      - id
      - name
      - updated_at
      - uuid
      filter: {}
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - is_verified
      - id
      - email
      - name
      - created_at
      - updated_at
      - uuid
      filter: {}
      check: null
  - role: user
    permission:
      columns:
      - email
      - name
      filter:
        uuid:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: super_admin
    permission:
      filter: {}
- table:
    schema: public
    name: user_profile
  object_relationships:
  - name: user
    using:
      foreign_key_constraint_on: user_uuid
  - name: user_profile_private
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_profile_private
        column_mapping:
          uuid: user_profile_uuid
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - created_at
      - educational_institution
      - id
      - location
      - location_latitude_longitude
      - personal_bio
      - photo
      - updated_at
      - user_uuid
      - username
      - uuid
      - work_bio
      - work_place
      - work_title
      backend_only: false
  - role: user
    permission:
      check:
        user_uuid:
          _eq: X-Hasura-User-Id
      columns:
      - created_at
      - educational_institution
      - location
      - location_latitude_longitude
      - personal_bio
      - photo
      - updated_at
      - user_uuid
      - username
      - work_bio
      - work_place
      - work_title
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - created_at
      - educational_institution
      - id
      - location
      - location_latitude_longitude
      - personal_bio
      - photo
      - updated_at
      - user_uuid
      - username
      - uuid
      - work_bio
      - work_place
      - work_title
      filter: {}
  - role: user
    permission:
      columns:
      - created_at
      - educational_institution
      - id
      - location
      - location_latitude_longitude
      - personal_bio
      - photo
      - updated_at
      - user_uuid
      - username
      - uuid
      - work_bio
      - work_place
      - work_title
      filter: {}
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - educational_institution
      - location
      - location_latitude_longitude
      - personal_bio
      - photo
      - username
      - work_bio
      - work_place
      - work_title
      filter: {}
      check: null
  - role: user
    permission:
      columns:
      - educational_institution
      - location
      - location_latitude_longitude
      - personal_bio
      - photo
      - username
      - work_bio
      - work_place
      - work_title
      filter:
        user_uuid:
          _eq: X-Hasura-User-Id
      check: null
- table:
    schema: public
    name: user_profile_private
  object_relationships:
  - name: user_profile
    using:
      foreign_key_constraint_on: user_profile_uuid
  insert_permissions:
  - role: super_admin
    permission:
      check: {}
      columns:
      - date_of_birth
      - id
      - gender
      - created_at
      - updated_at
      - user_profile_uuid
      - uuid
      backend_only: false
  - role: user
    permission:
      check:
        user_profile:
          user:
            uuid:
              _eq: X-Hasura-User-Id
      columns:
      - date_of_birth
      - gender
      - user_profile_uuid
      backend_only: false
  select_permissions:
  - role: super_admin
    permission:
      columns:
      - date_of_birth
      - id
      - gender
      - created_at
      - updated_at
      - user_profile_uuid
      - uuid
      filter: {}
  - role: user
    permission:
      columns:
      - date_of_birth
      - id
      - gender
      - created_at
      - updated_at
      - user_profile_uuid
      - uuid
      filter:
        user_profile:
          user:
            uuid:
              _eq: X-Hasura-User-Id
  update_permissions:
  - role: super_admin
    permission:
      columns:
      - date_of_birth
      - gender
      filter: {}
      check: null
  - role: user
    permission:
      columns:
      - date_of_birth
      - gender
      filter:
        user_profile:
          user:
            uuid:
              _eq: X-Hasura-User-Id
      check: null
- table:
    schema: public
    name: user_role
  is_enum: true
  array_relationships:
  - name: network_users
    using:
      foreign_key_constraint_on:
        column: role
        table:
          schema: public
          name: network_user
- table:
    schema: public
    name: verification_code
  event_triggers:
  - name: verification-code
    definition:
      enable_manual: true
      insert:
        columns: '*'
      delete:
        columns: '*'
      update:
        columns:
        - id
        - email
        - redirect
        - text
        - created_at
        - updated_at
        - uuid
    retry_conf:
      num_retries: 3
      interval_sec: 10
      timeout_sec: 60
    webhook_from_env: VERIFICATION_CODE_WEBHOOK_URL
